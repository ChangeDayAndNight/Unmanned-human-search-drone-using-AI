# DJI TELLO EDU 사람 탐지 시스템

YOLOv5n 모델을 사용하여 DJI TELLO EDU 드론으로 실시간 사람 탐지를 수행하는 시스템입니다.

## 🚀 주요 기능

- **자동 이륙 및 고도 제어**: 드론을 5m 고도로 자동 상승
- **실시간 사람 탐지**: YOLOv5n 모델을 사용한 정확한 사람 탐지
- **실시간 영상 스트림**: OpenCV를 통한 실시간 영상 출력
- **안전 기능**: 배터리 부족 시 자동 착륙
- **상세한 정보 표시**: 탐지된 사람 수, 드론 배터리, 고도 정보

## 📋 필요 사항

### 하드웨어
- DJI TELLO EDU 드론
- 충분히 충전된 배터리 (20% 이상)
- WiFi 연결 가능한 컴퓨터

### 소프트웨어
- Python 3.10+
- 필수 라이브러리 (requirements.txt 참조)

## 🛠️ 설치 방법

1. **필수 라이브러리 설치**
```bash
pip install djitellopy ultralytics opencv-python torch torchvision numpy pillow
```

2. **모델 파일 확인**
- `best.pt` 파일이 프로그램과 같은 디렉토리에 있는지 확인

## 🎮 사용 방법

1. **드론 준비**
   - 드론의 배터리가 20% 이상인지 확인
   - 드론의 WiFi에 컴퓨터를 연결
   - 충분한 공간이 있는 곳에서 사용

2. **프로그램 실행**
```bash
python tello_human_detection.py
```

3. **조작 방법**
   - 프로그램이 자동으로 드론을 이륙시키고 5m 고도로 상승
   - 실시간 영상 창에서 사람 탐지 결과 확인
   - `q` 키를 눌러 프로그램 종료 (자동으로 착륙)

## 📊 화면 정보

실시간 영상 창에는 다음 정보가 표시됩니다:

- **초록색 박스**: 탐지된 사람의 위치
- **신뢰도 점수**: 각 탐지의 정확도
- **탐지된 사람 수**: 현재 프레임에서 탐지된 총 인원
- **드론 정보**: 배터리 잔량 및 현재 고도
- **배터리 경고**: 배터리 부족 시 경고 메시지

## ⚠️ 안전 주의사항

1. **비행 환경**
   - 실내/야외 모두 가능하지만 충분한 공간 확보
   - 장애물이 없는 안전한 장소에서 사용
   - 바람이 강한 날씨에는 사용 금지

2. **배터리 관리**
   - 시작 전 배터리 20% 이상 확인
   - 배터리 부족 시 자동 착륙 기능 작동
   - 강제 종료 시에도 드론이 안전하게 착륙하도록 설계

3. **법적 준수**
   - 해당 지역의 드론 비행 규정 준수
   - 사생활 보호 및 촬영 규정 준수

## 🔧 설정 변경

코드 내 다음 변수들을 수정하여 동작을 조정할 수 있습니다:

```python
self.TARGET_HEIGHT = 500          # 목표 고도 (cm)
self.DETECTION_CONFIDENCE = 0.5   # 탐지 신뢰도 임계값
self.MIN_BATTERY = 20            # 최소 배터리 수준 (%)
```

## 🐛 문제 해결

### 일반적인 문제들

1. **"모델 파일을 찾을 수 없습니다"**
   - `best.pt` 파일이 프로그램과 같은 폴더에 있는지 확인

2. **드론 연결 실패**
   - 드론 WiFi에 연결되어 있는지 확인
   - 드론 전원이 켜져 있는지 확인
   - 다른 TELLO 앱이 실행 중이지 않은지 확인

3. **영상이 나오지 않음**
   - 드론 카메라가 활성화되어 있는지 확인
   - WiFi 연결 상태 확인

4. **탐지 성능이 낮음**
   - 조명 조건 개선
   - `DETECTION_CONFIDENCE` 값 조정 (0.3~0.7 권장)

## 📝 로그 정보

프로그램 실행 중 다음과 같은 로그가 출력됩니다:

- 시스템 초기화 과정
- 드론 배터리 상태
- 이륙 및 고도 조정 과정
- 실시간 탐지 결과
- 배터리 상태 모니터링

## 🔄 종료 방법

1. **정상 종료**: `q` 키 입력
2. **강제 종료**: `Ctrl+C`
3. **자동 종료**: 배터리 부족 시 자동 착륙

모든 종료 방법에서 드론은 안전하게 착륙하도록 설계되었습니다.

## 📞 지원

문제 발생 시 다음을 확인해주세요:
1. 모든 필수 라이브러리가 설치되어 있는지
2. 드론 배터리 상태
3. WiFi 연결 상태
4. 모델 파일(`best.pt`) 존재 여부

## 📄 라이선스

이 프로젝트는 교육 목적으로 제작되었습니다.